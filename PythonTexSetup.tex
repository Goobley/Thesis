\begin{pythontexcustomcode}{py}
import os
import pickle

import numpy as np
import matplotlib.pyplot as plt
import texfigure
texfigure.preamble_setup()
import seaborn as sns
from cycler import cycler
from matplotlib.colors import to_rgb

rc = {
    'pgf.preamble': [
        r'\usepackage{siunitx}',
        r'\newcommand*{\varv}{\upsilon}'
    ],
    'axes.titlesize': 12,
    'axes.labelsize': 12,
    'legend.fontsize': 10,
    'xtick.labelsize': 10,
    'ytick.labelsize': 10,
    'xtick.major.pad': 3,
    'xtick.minor.pad': 3,
    'ytick.major.pad': 3,
    'ytick.minor.pad': 3,
    'xtick.direction': 'in',
    'ytick.direction': 'in',
    'axes.linewidth': 0.5,
    'axes.prop_cycle': cycler('color', sns.color_palette('colorblind'))
# 'savefig.bbox': 'tight'
}
texfigure.configure_latex_plots(pytex, **rc)
pytex.formatter = texfigure.repr_latex_formatter
\end{pythontexcustomcode}

% NOTE(cmo): Set up color names for our 10 standard plotting colours so we can label the text in them. Sadly this can't work as-is, since we can't spline into latex commands from pythontex. The empty environment prevents pythontex from having issues if no pycode blocks are present.
\begin{pycode}
# colorNames = ['Blue', 'Orange', 'Green', 'Red', 'Purple', 'Brown', 'Pink', 'Grey', 'Yellow', 'Cyan']
# colorNumbers = ['C' + '{:d}'.format(i) for i in range(10)]
# rgbTemplate = r'\definecolor{{{colorName}}}{{rgb}}{{{r:f},{g:f},{b:f}}}'
# wordTemplate = r'\newcommand*{{\{commandName}}}{{{{\color{{{colorName}}}{word}}}}}'

# for i, col in enumerate(plt.rcParams['axes.prop_cycle']):
#     print(rgbTemplate.format(colorName='Mpl'+colorNames[i],
#                              **dict(zip(('r', 'g', 'b'), to_rgb(col['color'])))))
#     print(rgbTemplate.format(colorName='Mpl'+colorNumbers[i],
#                              **dict(zip(('r', 'g', 'b'), to_rgb(col['color'])))))
#     print(wordTemplate.format(commandName='Mpl'+colorNames[i]+'Word', colorName='Mpl'+colorNames[i],
#                               word=colorNames[i].lower()))
#     print(wordTemplate.format(commandName='Mpl'+colorNames[i]+'WordCap', colorName='Mpl'+colorNames[i],
#                               word=colorNames[i]))
\end{pycode}